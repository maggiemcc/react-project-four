{"ast":null,"code":"module.exports = function (e) {\n  var t = {};\n\n  function o(n) {\n    if (t[n]) return t[n].exports;\n    var r = t[n] = {\n      i: n,\n      l: !1,\n      exports: {}\n    };\n    return e[n].call(r.exports, r, r.exports, o), r.l = !0, r.exports;\n  }\n\n  return o.m = e, o.c = t, o.d = function (e, t, n) {\n    o.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: n\n    });\n  }, o.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, o.t = function (e, t) {\n    if (1 & t && (e = o(e)), 8 & t) return e;\n    if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (o.r(n), Object.defineProperty(n, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var r in e) o.d(n, r, function (t) {\n      return e[t];\n    }.bind(null, r));\n    return n;\n  }, o.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return o.d(t, \"a\", t), t;\n  }, o.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, o.p = \"\", o(o.s = 1);\n}([function (e, t) {\n  e.exports = require(\"react\");\n}, function (e, t, o) {\n  \"use strict\";\n\n  o.r(t), o.d(t, \"default\", function () {\n    return u;\n  }), o.d(t, \"useIdentityContext\", function () {\n    return l;\n  });\n  var n = o(0),\n      r = o.n(n);\n  const a = /(confirmation|invite|recovery|email_change|access)_token=([^&]+)/,\n        i = /^#\\/?/;\n\n  const s = ({\n    url: e\n  }) => {\n    const [t, o] = Object(n.useState)(),\n          [r, s] = Object(n.useState)(),\n          [c, l] = Object(n.useState)(),\n          [u, d] = Object(n.useState)(),\n          [f, p] = Object(n.useState)(),\n          [m, g] = Object(n.useState)(),\n          [y, h] = Object(n.useState)(),\n          b = Object(n.useMemo)(() => e + \"/.netlify/identity\", [e]),\n          w = Object(n.useCallback)(async (e, t) => {\n      if (!r) throw new Error(\"Cannot authorizedFetch while logged out\");\n      return fetch(e, { ...t,\n        headers: { ...(null == t ? void 0 : t.headers),\n          Authorization: \"Bearer \" + r.access_token\n        }\n      });\n    }, [r]),\n          O = Object(n.useCallback)(e => {\n      const t = new Date(1e3 * JSON.parse(window.atob(e.access_token.split(\".\")[1])).exp);\n      s({ ...e,\n        expires_at: t\n      });\n    }, []),\n          v = Object(n.useCallback)(async () => {\n      O(await fetch(b + \"/token\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: \"grant_type=refresh_token&refresh_token=\" + r.refresh_token\n      }).then(e => e.json()));\n    }, [O, b, r]),\n          j = Object(n.useCallback)(async () => {\n      console.log(\"Logging Out\"), localStorage.removeItem(\"ni.goTrueToken\"), localStorage.removeItem(\"ni.user\"), s(), o(), m && (clearTimeout(m), g());\n    }, [m]);\n    Object(n.useEffect)(() => {\n      if (r) {\n        localStorage.setItem(\"ni.goTrueToken\", JSON.stringify(r));\n        const e = Math.max(new Date(r.expires_at).getTime() - new Date().getTime() - 24e4, 0);\n        console.log(`Refresh goTrueToken in ${(e / 1e3).toFixed(0)} seconds`), g(setTimeout(v, e));\n      }\n    }, [r, v]), Object(n.useEffect)(() => {\n      t && localStorage.setItem(\"ni.user\", JSON.stringify(t));\n    }, [t]), Object(n.useEffect)(() => {\n      const e = localStorage.getItem(\"ni.goTrueToken\"),\n            t = localStorage.getItem(\"ni.user\");\n      e && t && (s(JSON.parse(e)), o(JSON.parse(t)), p());\n    }, []), Object(n.useEffect)(() => {\n      l(function () {\n        var e, t;\n        if (null === (e = document) || void 0 === e || null === (t = e.location) || void 0 === t || !t.hash) return null;\n        const o = document.location.hash.replace(i, \"\");\n\n        try {\n          window && window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n        } catch (e) {\n          window.location.href.substr(0, window.location.href.indexOf(\"#\"));\n        }\n\n        const n = o.match(a);\n        return n ? {\n          type: n[1],\n          token: n[2]\n        } : null;\n      }());\n    }, []), Object(n.useEffect)(() => {\n      \"confirmation\" !== (null == c ? void 0 : c.type) && \"recovery\" !== (null == c ? void 0 : c.type) && \"invite\" !== (null == c ? void 0 : c.type) || !r ? \"confirmation\" === (null == c ? void 0 : c.type) ? (console.log(\"Confirming User\"), fetch(b + \"/verify\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          token: c.token,\n          type: \"signup\"\n        })\n      }).then(e => e.json()).then(e => {\n        404 === e.code ? (console.log(\"Confirmation token attempted that's already been consumed; logging out\"), l()) : (l(), O(e));\n      })) : \"recovery\" === (null == c ? void 0 : c.type) && (console.log(\"Recovering User\"), fetch(b + \"/verify\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          token: c.token,\n          type: \"recovery\"\n        })\n      }).then(e => e.json()).then(e => {\n        404 === e.code ? (console.log(\"Recovery token attempted that's already been consumed; logging out\"), l()) : (l({\n          type: \"passwordRecovery\"\n        }), O(e));\n      })) : j();\n    }, [b, O, l, r, j, c]);\n\n    const S = async ({\n      email: e,\n      password: t\n    }) => {\n      const o = await fetch(b + \"/token\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: `grant_type=password&username=${encodeURIComponent(e)}&password=${encodeURIComponent(t)}`\n      }).then(e => e.json());\n      if (null != o && o.error_description) throw new Error(o.error_description);\n      O(o);\n    },\n          k = Object(n.useCallback)(async e => {\n      delete Object.assign(e, {\n        data: e.user_metadata\n      }).user_metadata;\n      const t = await w(b + \"/user\", {\n        method: \"PUT\",\n        body: JSON.stringify(e)\n      }).then(e => e.json());\n      if (null != t && t.msg) throw new Error(t.msg);\n      o(t), h(!0);\n    }, [b, w, o, h]);\n\n    Object(n.useEffect)(() => {\n      r && t && u && (d(), k(u));\n    }, [r, t, u, k]), Object(n.useEffect)(() => {\n      c && \"email_change\" === c.type && t && (console.log(\"Confirming Email Change\"), d({\n        email_change_token: c.token\n      }), l());\n    }, [c, t, k]), Object(n.useEffect)(() => {\n      r && !t && w(b + \"/user\").then(e => e.json()).then(e => o(e));\n    }, [b, o, w, r, t]);\n    Object(n.useEffect)(() => {\n      r && y && (clearTimeout(m), v(), h());\n    }, [r, y, v, m]);\n    const T = Object(n.useMemo)(() => (null == t ? void 0 : t.email) !== (null == t ? void 0 : t.new_email) && (null == t ? void 0 : t.new_email), [t]);\n    return {\n      user: t,\n      login: S,\n      logout: j,\n      update: k,\n      signup: async e => {\n        delete Object.assign(e, {\n          data: e.user_metadata\n        }).user_metadata;\n        const t = await fetch(b + \"/signup\", {\n          method: \"POST\",\n          body: JSON.stringify(e)\n        }).then(e => e.json());\n        if (null != t && t.msg) throw new Error(t.msg);\n        null != t && t.confirmed_at ? await S(e) : p(t);\n      },\n      urlToken: c,\n      refreshUser: k,\n      authorizedFetch: w,\n      provisionalUser: f,\n      pendingEmailUpdate: T,\n      sendPasswordRecovery: async ({\n        email: e\n      }) => fetch(b + \"/recover\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          email: e\n        })\n      }),\n      completeUrlTokenTwoStep: async ({\n        password: e,\n        ...t\n      }) => {\n        if (\"passwordRecovery\" === (null == c ? void 0 : c.type)) console.log(\"Updating Password & Clearing URL Token\"), d({\n          password: e\n        }), l();else if (\"invite\" === (null == c ? void 0 : c.type)) {\n          console.log(\"Setting Up Invited User\");\n          const o = await fetch(b + \"/verify\", {\n            method: \"POST\",\n            body: JSON.stringify({\n              token: c.token,\n              type: \"signup\",\n              password: e\n            })\n          }).then(e => e.json());\n          l(), O(o), d(t);\n        }\n      }\n    };\n  },\n        c = Object(n.createContext)(),\n        l = () => Object(n.useContext)(c),\n        u = ({\n    url: e,\n    children: t\n  }) => {\n    if (!e) throw new Error(\"No Identity URL defined! Use format https://example.com - no trailing slash\");\n    const o = s({\n      url: e\n    });\n    return r.a.createElement(c.Provider, {\n      value: o\n    }, t);\n  };\n}]);","map":{"version":3,"sources":["/Users/maggiemccausland/Documents/GitHub/react-project-four/node_modules/react-netlify-identity-gotrue/build/index.js"],"names":["module","exports","e","t","o","n","r","i","l","call","m","c","d","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","require","u","a","url","useState","f","g","y","h","b","useMemo","w","useCallback","Error","fetch","headers","Authorization","access_token","O","Date","JSON","parse","window","atob","split","exp","expires_at","v","method","body","refresh_token","then","json","j","console","log","localStorage","removeItem","clearTimeout","useEffect","setItem","stringify","Math","max","getTime","toFixed","setTimeout","getItem","document","location","hash","replace","history","pushState","title","pathname","search","href","substr","indexOf","match","type","token","code","S","email","password","encodeURIComponent","error_description","k","assign","data","user_metadata","msg","email_change_token","T","new_email","user","login","logout","update","signup","confirmed_at","urlToken","refreshUser","authorizedFetch","provisionalUser","pendingEmailUpdate","sendPasswordRecovery","completeUrlTokenTwoStep","createContext","useContext","children","createElement","Provider"],"mappings":"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","sourcesContent":["module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=1)}([function(e,t){e.exports=require(\"react\")},function(e,t,o){\"use strict\";o.r(t),o.d(t,\"default\",(function(){return u})),o.d(t,\"useIdentityContext\",(function(){return l}));var n=o(0),r=o.n(n);const a=/(confirmation|invite|recovery|email_change|access)_token=([^&]+)/,i=/^#\\/?/;const s=({url:e})=>{const[t,o]=Object(n.useState)(),[r,s]=Object(n.useState)(),[c,l]=Object(n.useState)(),[u,d]=Object(n.useState)(),[f,p]=Object(n.useState)(),[m,g]=Object(n.useState)(),[y,h]=Object(n.useState)(),b=Object(n.useMemo)(()=>e+\"/.netlify/identity\",[e]),w=Object(n.useCallback)(async(e,t)=>{if(!r)throw new Error(\"Cannot authorizedFetch while logged out\");return fetch(e,{...t,headers:{...null==t?void 0:t.headers,Authorization:\"Bearer \"+r.access_token}})},[r]),O=Object(n.useCallback)(e=>{const t=new Date(1e3*JSON.parse(window.atob(e.access_token.split(\".\")[1])).exp);s({...e,expires_at:t})},[]),v=Object(n.useCallback)(async()=>{O(await fetch(b+\"/token\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:\"grant_type=refresh_token&refresh_token=\"+r.refresh_token}).then(e=>e.json()))},[O,b,r]),j=Object(n.useCallback)(async()=>{console.log(\"Logging Out\"),localStorage.removeItem(\"ni.goTrueToken\"),localStorage.removeItem(\"ni.user\"),s(),o(),m&&(clearTimeout(m),g())},[m]);Object(n.useEffect)(()=>{if(r){localStorage.setItem(\"ni.goTrueToken\",JSON.stringify(r));const e=Math.max(new Date(r.expires_at).getTime()-(new Date).getTime()-24e4,0);console.log(`Refresh goTrueToken in ${(e/1e3).toFixed(0)} seconds`),g(setTimeout(v,e))}},[r,v]),Object(n.useEffect)(()=>{t&&localStorage.setItem(\"ni.user\",JSON.stringify(t))},[t]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"ni.goTrueToken\"),t=localStorage.getItem(\"ni.user\");e&&t&&(s(JSON.parse(e)),o(JSON.parse(t)),p())},[]),Object(n.useEffect)(()=>{l(function(){var e,t;if(null===(e=document)||void 0===e||null===(t=e.location)||void 0===t||!t.hash)return null;const o=document.location.hash.replace(i,\"\");try{window&&window.history.pushState(\"\",document.title,window.location.pathname+window.location.search)}catch(e){window.location.href.substr(0,window.location.href.indexOf(\"#\"))}const n=o.match(a);return n?{type:n[1],token:n[2]}:null}())},[]),Object(n.useEffect)(()=>{\"confirmation\"!==(null==c?void 0:c.type)&&\"recovery\"!==(null==c?void 0:c.type)&&\"invite\"!==(null==c?void 0:c.type)||!r?\"confirmation\"===(null==c?void 0:c.type)?(console.log(\"Confirming User\"),fetch(b+\"/verify\",{method:\"POST\",body:JSON.stringify({token:c.token,type:\"signup\"})}).then(e=>e.json()).then(e=>{404===e.code?(console.log(\"Confirmation token attempted that's already been consumed; logging out\"),l()):(l(),O(e))})):\"recovery\"===(null==c?void 0:c.type)&&(console.log(\"Recovering User\"),fetch(b+\"/verify\",{method:\"POST\",body:JSON.stringify({token:c.token,type:\"recovery\"})}).then(e=>e.json()).then(e=>{404===e.code?(console.log(\"Recovery token attempted that's already been consumed; logging out\"),l()):(l({type:\"passwordRecovery\"}),O(e))})):j()},[b,O,l,r,j,c]);const S=async({email:e,password:t})=>{const o=await fetch(b+\"/token\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:`grant_type=password&username=${encodeURIComponent(e)}&password=${encodeURIComponent(t)}`}).then(e=>e.json());if(null!=o&&o.error_description)throw new Error(o.error_description);O(o)},k=Object(n.useCallback)(async e=>{delete Object.assign(e,{data:e.user_metadata}).user_metadata;const t=await w(b+\"/user\",{method:\"PUT\",body:JSON.stringify(e)}).then(e=>e.json());if(null!=t&&t.msg)throw new Error(t.msg);o(t),h(!0)},[b,w,o,h]);Object(n.useEffect)(()=>{r&&t&&u&&(d(),k(u))},[r,t,u,k]),Object(n.useEffect)(()=>{c&&\"email_change\"===c.type&&t&&(console.log(\"Confirming Email Change\"),d({email_change_token:c.token}),l())},[c,t,k]),Object(n.useEffect)(()=>{r&&!t&&w(b+\"/user\").then(e=>e.json()).then(e=>o(e))},[b,o,w,r,t]);Object(n.useEffect)(()=>{r&&y&&(clearTimeout(m),v(),h())},[r,y,v,m]);const T=Object(n.useMemo)(()=>(null==t?void 0:t.email)!==(null==t?void 0:t.new_email)&&(null==t?void 0:t.new_email),[t]);return{user:t,login:S,logout:j,update:k,signup:async e=>{delete Object.assign(e,{data:e.user_metadata}).user_metadata;const t=await fetch(b+\"/signup\",{method:\"POST\",body:JSON.stringify(e)}).then(e=>e.json());if(null!=t&&t.msg)throw new Error(t.msg);null!=t&&t.confirmed_at?await S(e):p(t)},urlToken:c,refreshUser:k,authorizedFetch:w,provisionalUser:f,pendingEmailUpdate:T,sendPasswordRecovery:async({email:e})=>fetch(b+\"/recover\",{method:\"POST\",body:JSON.stringify({email:e})}),completeUrlTokenTwoStep:async({password:e,...t})=>{if(\"passwordRecovery\"===(null==c?void 0:c.type))console.log(\"Updating Password & Clearing URL Token\"),d({password:e}),l();else if(\"invite\"===(null==c?void 0:c.type)){console.log(\"Setting Up Invited User\");const o=await fetch(b+\"/verify\",{method:\"POST\",body:JSON.stringify({token:c.token,type:\"signup\",password:e})}).then(e=>e.json());l(),O(o),d(t)}}}},c=Object(n.createContext)(),l=()=>Object(n.useContext)(c),u=({url:e,children:t})=>{if(!e)throw new Error(\"No Identity URL defined! Use format https://example.com - no trailing slash\");const o=s({url:e});return r.a.createElement(c.Provider,{value:o},t)}}]);"]},"metadata":{},"sourceType":"script"}